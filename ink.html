<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
  <meta content="yes" name="apple-mobile-web-app-capable">
  <meta content="yes" name="apple-touch-fullscreen">
  <meta content="black" name="apple-mobile-web-app-status-bar-style">
  <meta content="320" name="MobileOptimized">
  <meta content="true" name="HandheldFriendly">
  <meta name="mobile-web-app-capable" content="yes">

  <!-- Open Graph 协议标签 - 微信分享卡片用 -->
  <meta property="og:title" content="百草珍酿" />
  <meta property="og:description" content="邀请您一起来学习" />
  <meta property="og:image" content="https://m.360buyimg.com/i/jfs/t1/307252/25/16806/3963/68751929Fe9835238/cd51d524746c2785.jpg" />
  <meta property="og:type" content="website" />
  <meta property="og:url" id="og-url" content="" />
  <meta property="og:site_name" content="百草珍酿" />

  <!-- 微信特定标签（可选） -->
  <meta property="wechat:miniprogram" content="" />
  <meta property="wechat:miniprogram_image" content="" />

  <title>百草珍酿学习课22</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background-color: #000;
      overflow: hidden;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }
    
    .container {
      width: 100px;
      height: 100px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
    }

    .dot {
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background-color: #000;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      margin: auto;
    }

    .dot-3 {
      background-color: #f74d75;
      animation: dot-3-move 2s ease infinite;
    }

    @keyframes dot-3-move {
      20% { transform: scale(1) }
      45% { transform: translateY(-18px) scale(.45) }
      60% { transform: translateY(-25px) scale(.45) }
      80% { transform: translateY(-25px) scale(.45) }
      100% { transform: translateY(0px) scale(1) }
    }

    .dot-2 {
      background-color: #10beae;
      animation: dot-2-move 2s ease infinite;
    }

    .dot-1 {
      background-color: #ffe386;
      animation: dot-1-move 2s ease infinite;
    }

    @keyframes dot-2-move {
      20% { transform: scale(1) }
      45% { transform: translate(-16px, 12px) scale(.45) }
      60% { transform: translate(-20px, 15px) scale(.45) }
      80% { transform: translate(-20px, 15px) scale(.45) }
      100% { transform: translateY(0px) scale(1) }
    }

    @keyframes dot-1-move {
      20% { transform: scale(1) }
      45% { transform: translate(16px, 12px) scale(.45) }
      60% { transform: translate(20px, 15px) scale(.45) }
      80% { transform: translate(20px, 15px) scale(.45) }
      100% { transform: translateY(0px) scale(1) }
    }

    .container {
      animation: rotate-move 2s ease-in-out infinite;
    }

    @keyframes rotate-move {
      55% { transform: translate(-50%, -50%) rotate(0deg) }
      80% { transform: translate(-50%, -50%) rotate(360deg) }
      100% { transform: translate(-50%, -50%) rotate(360deg) }
    }
    
    .content {
      height:100%;
      width:100%;
      position: fixed;
      left: 0;
      top: 0;
      border: none;
      background: #000;
      -webkit-overflow-scrolling: touch;
      overflow: auto;
      z-index: 2;
    }
    
    /* 全屏相关样式 */
    :-webkit-full-screen .content {
      width: 100% !important;
      height: 100% !important;
    }
    
    :-moz-full-screen .content {
      width: 100% !important;
      height: 100% !important;
    }
    
    :-ms-fullscreen .content {
      width: 100% !important;
      height: 100% !important;
    }
    
    :fullscreen .content {
      width: 100% !important;
      height: 100% !important;
    }
    
    /* 隐藏所有视频控制按钮 */
    video::-webkit-media-controls {
      display: none !important;
    }
    
    video::-webkit-media-controls-panel {
      display: none !important;
    }
    
    video::-webkit-media-controls-play-button {
      display: none !important;
    }
    
    video::-webkit-media-controls-start-playback-button {
      display: none !important;
    }
    
    video::-webkit-media-controls-volume-slider {
      display: none !important;
    }
    
    video::-webkit-media-controls-mute-button {
      display: none !important;
    }
    
    video::-webkit-media-controls-timeline {
      display: none !important;
    }
    
    video::-webkit-media-controls-current-time-display {
      display: none !important;
    }
    
    video::-webkit-media-controls-time-remaining-display {
      display: none !important;
    }
    
    video::-webkit-media-controls-fullscreen-button {
      display: none !important;
    }
    
    /* 隐藏视频播放器的倍速控制 */
    video::-webkit-media-controls-playback-rate-button {
      display: none !important;
    }
    
    /* 隐藏下载按钮 */
    video::-webkit-media-controls-download-button {
      display: none !important;
    }
    
    /* 隐藏画中画按钮 */
    video::-webkit-media-controls-picture-in-picture-button {
      display: none !important;
    }
    
    video::-webkit-media-controls-overlay-play-button {
      display: none !important;
    }
    
    /* 自定义全屏按钮 */
    .fullscreen-button {
      position: fixed;
      right: 15px;
      bottom: 15px;
      z-index: 9999;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      display: none;
    }
    
    /* 横屏模式样式 */
    .landscape-mode {
      transform: rotate(90deg);
      transform-origin: center center;
      width: 100vh;
      height: 100vw;
      position: fixed;
      top: 50%;
      left: 50%;
      margin-top: -50vw;
      margin-left: -50vh;
    }
    
    /* 横屏模式下的iframe */
    .landscape-mode iframe {
      width: 100vh !important;
      height: 100vw !important;
    }
    
    /* 点击播放提示 */
    .play-hint {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      color: white;
      font-size: 24px;
      text-align: center;
      flex-direction: column;
    }
    
    .play-hint.hidden {
      display: none;
    }
    
    .play-icon {
      font-size: 60px;
      margin-bottom: 20px;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
  </style>

  <!-- 动态设置og:url为当前页面URL -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('og-url').content = window.location.href;
    });
  </script>
</head>

<body>
  <div class="container">
    <div class="dot dot-1"></div>
    <div class="dot dot-2"></div>
    <div class="dot dot-3"></div>
  </div>
  
  <div class="play-hint" id="playHint">
    <div class="play-icon">▶</div>
    <div>点击页面任意处开始播放</div>
  </div>
  
  <button class="fullscreen-button" id="fullscreenBtn">全屏播放</button>

  <script>
    var urlParams = new URLSearchParams(window.location.search);
    var encodedParam = urlParams.get('c');
    var tureurl = atob(encodedParam);
    
    // 创建全屏按钮
    var fullscreenBtn = document.getElementById('fullscreenBtn');
    var playHint = document.getElementById('playHint');
    var isLandscapeMode = false;
    var videoStarted = false;
    
    if (tureurl.includes("http")) {
      var square = document.querySelector(".container");
      setTimeout(function() {
        square.style.display = "none";
      }, 1500);
      
      var iframe = document.createElement('iframe');
      iframe.className = 'content';
      iframe.setAttribute('allowfullscreen', '');
      iframe.setAttribute('webkitallowfullscreen', '');
      iframe.setAttribute('mozallowfullscreen', '');
      iframe.setAttribute('allow', 'autoplay; fullscreen; accelerometer; gyroscope');
      iframe.setAttribute('scrolling', 'no');
      iframe.setAttribute('frameborder', '0');
      iframe.style.display = 'none'; // 初始隐藏iframe
      
      // 更强大的样式注入方案
      iframe.onload = function() {
        // 显示全屏按钮
        fullscreenBtn.style.display = 'block';
        playHint.classList.remove('hidden');
        
        try {
          // 主样式注入
          var style = document.createElement('style');
          style.textContent = `
            /* 隐藏所有非视频元素 */
            body *:not(video):not(iframe):not(object):not(embed) {
              display: none !important;
              visibility: hidden !important;
              height: 0 !important;
              width: 0 !important;
              opacity: 0 !important;
              padding: 0 !important;
              margin: 0 !important;
              position: absolute !important;
              clip: rect(0 0 0 0) !important;
              overflow: hidden !important;
            }
            
            /* 确保视频全屏 */
            video, iframe, object, embed {
              position: fixed !important;
              top: 0 !important;
              left: 0 !important;
              width: 100% !important;
              height: 100% !important;
              z-index: 999999 !important;
            }
            
            /* 重置body和html */
            body, html {
              padding: 0 !important;
              margin: 0 !important;
              overflow: hidden !important;
              background: black !important;
              height: 100% !important;
              width: 100% !important;
            }
            
            /* 隐藏所有播放器控制元素 */
            .vjs-control-bar, 
            .plyr__controls,
            [class*="control"],
            [class*="controls"],
            [role="toolbar"],
            [role="menubar"],
            button,
            .vjs-playback-rate, 
            [class*="speed-control"], 
            [class*="rate-control"],
            .plyr__menu__container [data-plyr="speed"],
            [data-testid="player-controls"] [aria-label*="speed"],
            [aria-label*="playback rate"],
            /* 隐藏下载按钮 */
            [aria-label*="download"],
            [title*="下载"],
            [class*="download"],
            /* 隐藏画中画按钮 */
            [aria-label*="画中画"],
            [title*="画中画"],
            [class*="picture-in-picture"],
            button[data-pip],
            /* 隐藏全屏按钮 */
            [aria-label*="fullscreen"],
            [title*="全屏"],
            [class*="fullscreen"],
            /* 隐藏更多可能的控制元素 */
            .vjs-fullscreen-control,
            .vjs-picture-in-picture-control,
            .vjs-volume-panel,
            .vjs-play-control,
            .vjs-progress-control,
            .vjs-remaining-time,
            .vjs-duration,
            .vjs-time-control,
            .vjs-playback-rate,
            .vjs-chapters-button,
            .vjs-descriptions-button,
            .vjs-subtitles-button,
            .vjs-captions-button,
            .vjs-audio-button,
            .vjs-quality-selector,
            .vjs-resolution-button,
            .vjs-playback-rate,
            .vjs-icon-placeholder {
              display: none !important;
              visibility: hidden !important;
              opacity: 0 !important;
              width: 0 !important;
              height: 0 !important;
              padding: 0 !important;
              margin: 0 !important;
              position: absolute !important;
              clip: rect(0 0 0 0) !important;
            }
            
            /* 隐藏广告和叠加层 */
            .ad-container, .ad, [class*="ad-"], 
            .overlay, .popup, .modal,
            [id*="ad"], [id*="Ad"] {
              display: none !important;
            }
            
            /* 针对原生视频元素的伪元素选择器 */
            video::-webkit-media-controls {
              display: none !important;
            }
            
            video::-webkit-media-controls-enclosure {
              display: none !important;
            }
            
            video::-webkit-media-controls-panel {
              display: none !important;
            }
            
            video::-webkit-media-controls-play-button {
              display: none !important;
            }
            
            video::-webkit-media-controls-start-playback-button {
              display: none !important;
            }
            
            video::-webkit-media-controls-volume-slider {
              display: none !important;
            }
            
            video::-webkit-media-controls-mute-button {
              display: none !important;
            }
            
            video::-webkit-media-controls-timeline {
              display: none !important;
            }
            
            video::-webkit-media-controls-current-time-display {
              display: none !important;
            }
            
            video::-webkit-media-controls-time-remaining-display {
              display: none !important;
            }
            
            video::-webkit-media-controls-fullscreen-button {
              display: none !important;
            }
            
            video::-webkit-media-controls-playback-rate-button {
              display: none !important;
            }
            
            video::-webkit-media-controls-download-button {
              display: none !important;
            }
            
            video::-webkit-media-controls-picture-in-picture-button {
              display: none !important;
            }
            
            video::-webkit-media-controls-overlay-play-button {
              display: none !important;
            }
          `;
          
          try {
            // 尝试直接注入
            iframe.contentDocument.head.appendChild(style);
          } catch(e) {
            console.log('直接注入CSS失败:', e);
            // 备用方案：通过JavaScript查找并隐藏元素
            try {
              var script = document.createElement('script');
              script.textContent = `
                // 隐藏所有非视频元素
                function hideNonVideoElements() {
                  var allElements = document.querySelectorAll('body *:not(video):not(iframe):not(object):not(embed)');
                  allElements.forEach(function(el) {
                    el.style.display = 'none';
                    el.style.visibility = 'hidden';
                    el.style.height = '0';
                    el.style.width = '0';
                  });
                  
                  // 确保视频全屏
                  var videos = document.querySelectorAll('video, iframe, object, embed');
                  videos.forEach(function(video) {
                    video.style.position = 'fixed';
                    video.style.top = '0';
                    video.style.left = '0';
                    video.style.width = '100%';
                    video.style.height = '100%';
                    video.style.zIndex = '999999';
                  });
                  
                  // 重置body样式
                  document.body.style.padding = '0';
                  document.body.style.margin = '0';
                  document.body.style.overflow = 'hidden';
                  document.body.style.background = 'black';
                  
                  // 隐藏所有控制按钮
                  hideAllPlayerControls();
                }
                
                // 隐藏所有播放器控制按钮
                function hideAllPlayerControls() {
                  // 选择所有可能的控制元素
                  var controlSelectors = [
                    '.vjs-control-bar', 
                    '.plyr__controls',
                    '[class*="control"]',
                    '[class*="controls"]',
                    '[role="toolbar"]',
                    '[role="menubar"]',
                    'button',
                    '.vjs-playback-rate', 
                    '[class*="speed-control"]', 
                    '[class*="rate-control"]',
                    '.plyr__menu__container [data-plyr="speed"]',
                    '[data-testid="player-controls"] [aria-label*="speed"]',
                    '[aria-label*="playback rate"]',
                    '[aria-label*="download"]',
                    '[title*="下载"]',
                    '[class*="download"]',
                    '[aria-label*="画中画"]',
                    '[title*="画中画"]',
                    '[class*="picture-in-picture"]',
                    'button[data-pip]',
                    '[aria-label*="fullscreen"]',
                    '[title*="全屏"]',
                    '[class*="fullscreen"]',
                    '.vjs-fullscreen-control',
                    '.vjs-picture-in-picture-control',
                    '.vjs-volume-panel',
                    '.vjs-play-control',
                    '.vjs-progress-control',
                    '.vjs-remaining-time',
                    '.vjs-duration',
                    '.vjs-time-control',
                    '.vjs-playback-rate',
                    '.vjs-chapters-button',
                    '.vjs-descriptions-button',
                    '.vjs-subtitles-button',
                    '.vjs-captions-button',
                    '.vjs-audio-button',
                    '.vjs-quality-selector',
                    '.vjs-resolution-button',
                    '.vjs-playback-rate',
                    '.vjs-icon-placeholder'
                  ];
                  
                  controlSelectors.forEach(function(selector) {
                    var elements = document.querySelectorAll(selector);
                    elements.forEach(function(el) {
                      el.style.display = 'none';
                      el.style.visibility = 'hidden';
                      el.style.opacity = '0';
                      el.style.width = '0';
                      el.style.height = '0';
                      el.style.padding = '0';
                      el.style.margin = '0';
                      el.style.position = 'absolute';
                      el.style.clip = 'rect(0 0 0 0)';
                    });
                  });
                }
                
                // 初始执行
                hideNonVideoElements();
                
                // 监听DOM变化以防动态加载内容
                var observer = new MutationObserver(function(mutations) {
                  hideNonVideoElements();
                });
                observer.observe(document.body, {
                  childList: true,
                  subtree: true
                });
                
                // 定期检查以防遗漏
                setInterval(hideNonVideoElements, 1000);
              `;
              iframe.contentDocument.head.appendChild(script);
            } catch(e) {
              console.log('JS注入也失败:', e);
            }
          }
          
        } catch(e) {
          console.log('样式注入出错:', e);
        }
      };
      
      iframe.src = tureurl;
      document.body.appendChild(iframe);
      console.log(tureurl);
      
      // 添加页面点击事件监听 - 点击后开始播放
      document.body.addEventListener('click', function startPlayback() {
        if (!videoStarted) {
          videoStarted = true;
          playHint.classList.add('hidden');
          iframe.style.display = 'block';
          
          // 尝试在iframe中播放视频
          try {
            var iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
            var videos = iframeDoc.querySelectorAll('video');
            
            if (videos.length > 0) {
              videos.forEach(function(video) {
                video.play().catch(function(e) {
                  console.log('自动播放失败:', e);
                });
              });
            } else {
              // 如果没有找到video元素，可能是嵌入的播放器
              setTimeout(function() {
                try {
                  iframe.contentWindow.postMessage('play', '*');
                } catch(e) {
                  console.log('发送播放消息失败:', e);
                }
              }, 1000);
            }
          } catch(e) {
            console.log('跨域访问限制:', e);
          }
          
          // 移除事件监听器，防止重复触发
          document.body.removeEventListener('click', startPlayback);
        }
      });
      
      // 添加全屏按钮事件监听
      fullscreenBtn.addEventListener('click', toggleLandscapeMode);
      
      // 监听屏幕方向变化
      if (screen.orientation && screen.orientation.addEventListener) {
        screen.orientation.addEventListener('change', function() {
          if (screen.orientation.type.includes('landscape')) {
            document.body.classList.add('landscape-mode');
            fullscreenBtn.textContent = '退出全屏';
          } else {
            document.body.classList.remove('landscape-mode');
            fullscreenBtn.textContent = '全屏播放';
          }
        });
      }
    } else {
      console.log("nourls");
    }
    
    // 横屏全屏功能
    function toggleLandscapeMode() {
      if (!isLandscapeMode) {
        // 进入横屏模式
        if (document.documentElement.requestFullscreen) {
          document.documentElement.requestFullscreen().then(function() {
            if (screen.orientation && screen.orientation.lock) {
              screen.orientation.lock('landscape').catch(function(error) {
                console.log('锁定横屏失败:', error);
                // 如果锁定横屏失败，使用CSS旋转
                document.body.classList.add('landscape-mode');
              });
            } else {
              document.body.classList.add('landscape-mode');
            }
          });
        } else if (document.documentElement.webkitRequestFullscreen) {
          document.documentElement.webkitRequestFullscreen().then(function() {
            if (screen.orientation && screen.orientation.lock) {
              screen.orientation.lock('landscape').catch(function(error) {
                console.log('锁定横屏失败:', error);
                document.body.classList.add('landscape-mode');
              });
            } else {
              document.body.classList.add('landscape-mode');
            }
          });
        } else {
          // 如果不支持全屏API，仅使用CSS旋转
          document.body.classList.add('landscape-mode');
        }
        fullscreenBtn.textContent = '退出全屏';
        isLandscapeMode = true;
      } else {
        // 退出横屏模式
        if (document.exitFullscreen) {
          document.exitFullscreen().then(function() {
            if (screen.orientation && screen.orientation.unlock) {
              screen.orientation.unlock();
            }
            document.body.classList.remove('landscape-mode');
          });
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen().then(function() {
            if (screen.orientation && screen.orientation.unlock) {
              screen.orientation.unlock();
            }
            document.body.classList.remove('landscape-mode');
          });
        } else {
          document.body.classList.remove('landscape-mode');
        }
        fullscreenBtn.textContent = '全屏播放';
        isLandscapeMode = false;
      }
    }

    // 监听来自iframe的消息
    window.addEventListener('message', function(event) {
      console.log('收到消息:', event.data);
      if (event.data === 'videoReady' && videoStarted) {
        // 如果视频已准备好并且用户已点击，尝试播放
        try {
          iframe.contentWindow.postMessage('play', '*');
        } catch(e) {
          console.log('发送播放消息失败:', e);
        }
      }
    });
  </script>
</body>
</html>
